<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Climate Pulse</title>
    
    <!-- External CSS -->
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Paytone+One&family=Russo+One&display=swap" rel="stylesheet">

    <style>
        .map-container iframe {
            width: 100%;
            height: 100vh;
            border: none; /* Remove iframe border */
        }
    </style>
</head>
<body>

<!-- Map container (bottom layer) -->
<div class="map-container">
    <!-- Default to loading temperature-wind through its Flask route -->
    <iframe id="map-layer" src="{{ url_for('temperature_wind') }}"></iframe>
</div>

<!-- Middle layer: icons, navigation bar, and widgets -->
<div class="left-panel">
    <img src="{{ url_for('static', filename='images/Setting.png') }}" alt="Settings" id="settings-btn">
    <img src="{{ url_for('static', filename='images/Favourite.png') }}" alt="Favourite">
</div>

<div class="right-panel">
    <img src="{{ url_for('static', filename='images/Search.png') }}" alt="Search">
    <img src="{{ url_for('static', filename='images/Find_my_location.png') }}" alt="Find My Location">
    <img src="{{ url_for('static', filename='images/About_us.png') }}" alt="About Us">
    <img src="{{ url_for('static', filename='images/Warnings.png') }}" alt="Weather Warnings">
    
    <div class="switch-bar">
        <img src="{{ url_for('static', filename='images/Rainfall.png') }}" alt="Rainfall" id="rainfall-btn">
        <img src="{{ url_for('static', filename='images/Temperature.png') }}" alt="Temperature" id="temperature-btn">
    </div>

    <div class="tool-bar">
        <img src="{{ url_for('static', filename='images/Plus.png') }}" alt="Zoom In">
        <img src="{{ url_for('static', filename='images/Minus.png') }}" alt="Zoom Out">
        <img src="{{ url_for('static', filename='images/Empty.png') }}" alt="Reset Map">
    </div>
</div>


<!-- Form container for Climate Data Form (hidden by default) -->
<div class="form-popup" id="climate-data-form">
    <span class="close-btn" id="close-form">&times;</span> <!-- Close button -->
    <h1>Weather Prediction Tool</h1>
    <form action="/predict_model_API" method="post">
        <label for="location">Enter Location (latitude, longitude):</label><br>
        <input type="text" id="location" name="location" required><br>

        <input type="submit" value="Predict">
    </form>

    <hr style="margin: 30px 0;">

    <h1>Weather Historical Data Visualization</h1>
    <form action="/process" method="POST">

        <!-- Suburbs Input (Text Box) -->
        <label for="suburbs">Suburbs (comma-separated):</label><br>
        <input type="text" id="suburbs" name="suburbs" placeholder="Alpine, Clayton" required><br><br>

        <label for="variable">Select Variable:</label><br>
            <select id="variable" name="variable">
                <option value="temperature">Temperature</option>
                <option value="rainfall">Rain fall</option>
            </select><br>
        
        <label for="startDate">Start Date:</label><br>
        <input type="date" id="startDate" name="startDate" value="2015-01-01" required><br><br>

        <!-- End Date Input -->
        <label for="endDate">End Date:</label><br>
        <input type="date" id="endDate" name="endDate" value="2024-07-31" required><br><br>

        <!-- Period Input -->
        <label for="period">Period:</label><br>
        <select id="period" name="period">
            <option value="M">Monthly frequency</option>
            <option value="Y">Yearly frequency</option>
            <option value="Q">Quarterly frequency</option>
            <option value="W">Weakly frequency</option>
        </select><br>

        <label for="chartType">Select Type of Chart:</label><br>
            <select id="chartType" name="chartType">
                <option value="lineChart">Line chart</option>
                <option value="barChart">Bar chart</option>
                <option value="histogram">Histogram</option>
                <option value="areaChart">Area chart</option>
            </select><br>

        <input type="submit" value="Produce Chart">
    </form>
</div>


<!-- Header container and navigation bar -->
<div class="header-container">
    <div class="navigation-bar">
        <a href="{{ url_for('home') }}" class="nav-item">Home</a>
        <a href="#" class="nav-item" style="margin-right: 100px;">Weather Warnings</a>
        <div class="yellow-semi-circle">
            <!-- SVG for curved text -->
            <svg width="240" height="120">
                <path id="curve" d="M 0 100 Q 120 0 240 100" fill="transparent"/>
                <text width="240" style="fill: black;">
                    <textPath xlink:href="#curve" startOffset="50%" text-anchor="middle">
                        CLIMATE PULSE
                    </textPath>
                </text>
            </svg>
            <div class="logo">
                <img src="{{ url_for('static', filename='images/ClimatePulse_logo.png') }}" alt="Logo">
            </div>
        </div>
        <a href="#" class="nav-item" style="margin-left: 100px;">User Guide</a>
        <a href="{{ url_for('contact') }}" class="nav-item">Contact Us</a>
    </div>
</div>

<!-- Weather widget container -->
<div id="widget-container">
    <div id="ww_9a1c6d42ce1d2" v='1.3' loc='auto' a='{"t":"ticker","lang":"en","sl_lpl":1,"ids":[],"font":"Arial","sl_ics":"one_a","sl_sot":"celsius","cl_bkg":"#000000","cl_font":"#FFFFFF","cl_cloud":"#FFFFFF","cl_persp":"#81D4FA","cl_sun":"#FFC107","cl_moon":"#FFC107","cl_thund":"#FF5722"}'>
        Weather Data Source: 
        <a href="https://wetterlang.de/wetter_21_tage/" id="ww_9a1c6d42ce1d2_u" target="_blank">Wetter fur 21 tage</a>
    </div>
    <script async src="https://app2.weatherwidget.org/js/?id=ww_9a1c6d42ce1d2"></script>
</div>


<!-- JavaScript to switch between layers -->
<script>
    const rainfallBtn = document.getElementById('rainfall-btn');
    const temperatureBtn = document.getElementById('temperature-btn');
    const mapLayer = document.getElementById('map-layer');

    // Switch to the precipitation layer
    rainfallBtn.addEventListener('click', () => {
        mapLayer.src = '{{ url_for("precipitation") }}';
    });

    // Switch to the temperature layer
    temperatureBtn.addEventListener('click', () => {
        mapLayer.src = '{{ url_for("temperature_wind") }}';
    });


    const settingsBtn = document.getElementById('settings-btn');
    const formPopup = document.getElementById('climate-data-form');
    const closeFormBtn = document.getElementById('close-form');

    // Show the form when the settings icon is clicked
    settingsBtn.addEventListener('click', function() {
        formPopup.style.display = 'block';
    });

    // Hide the form when the close button is clicked
    closeFormBtn.addEventListener('click', function() {
        formPopup.style.display = 'none';
    });

    // Optionally close the form if user clicks outside the form area
    window.addEventListener('click', function(event) {
        if (event.target == formPopup) {
            formPopup.style.display = 'none';
        }
    });



</script>

</body>
</html>

